version: "3.2"
services:

  pg:
    image: postgres
    environment:
      POSTGRES_DB: brainwave
      POSTGRES_USER: artyombn
      POSTGRES_PASSWORD: admin
#    volumes:
#      - db-data:/var/lib/postgresql/data
    ports:
      - "5432:5432"
#    healthcheck:
#      test: [ "CMD-SHELL", "pg_isready -d blog -U user" ]
#      interval: 5s
#      timeout: 3s
#      retries: 5


  rabbitmq:
    image: rabbitmq:3-management
    ports:
        - 5672:5672
        - 15672:15672


# Если рассматривать запуск всех связанных приложений через docker compose
# 1. postgres
# 2. django-backend + gunicorn (uwsgi) - celery
# 3. nginx (apache)
# 4. celery

